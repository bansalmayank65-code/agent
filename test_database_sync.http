### Test Database Sync Functionality

### Step 1: Import a test task
POST http://localhost:8080/api/tasks/import-task
Content-Type: application/json

{
  "taskId": "test_db_sync_001",
  "dbUserId": "1",
  "taskJson": "{\"task\": {\"env\": \"finance\", \"interface_num\": 4, \"instruction\": \"Original instruction\", \"user_id\": \"10\", \"actions\": [{\"name\": \"action1\", \"arguments\": {\"param1\": \"value1\"}, \"output\": \"output1\"}], \"outputs\": [\"out1\", \"out2\", \"out3\"], \"edges\": [{\"from\": \"action1\", \"to\": \"output1\", \"connection\": {\"output\": \"result\", \"input\": \"data\"}}], \"num_edges\": 1}, \"model\": {\"name\": \"test_model\", \"version\": \"1.0\"}}"
}

### Step 2: Verify task was imported correctly
GET http://localhost:8080/api/tasks/cache/status

### Step 3: Update the task data (Actions, User ID, Outputs, Edges) - simulating user changes from Step 3 onwards
POST http://localhost:8080/api/tasks/cache/update
Content-Type: application/json

{
  "instruction": "Updated instruction after import",
  "userId": "20", 
  "actions": ["updated_action1", "new_action2"],
  "actionObjects": [
    {
      "name": "updated_action1",
      "arguments": {"new_param": "new_value"},
      "output": "updated_output"
    },
    {
      "name": "new_action2", 
      "arguments": {"param2": "value2"},
      "output": "output2"
    }
  ],
  "outputs": ["new_out1", "new_out2", "new_out3", "new_out4"],
  "edges": [
    {
      "from": "updated_action1",
      "to": "new_out1", 
      "connection": {"output": "updated_result", "input": "updated_data"}
    },
    {
      "from": "new_action2",
      "to": "new_out2",
      "connection": {"output": "result2", "input": "data2"}
    }
  ]
}

### Step 4: Verify the cache was updated 
GET http://localhost:8080/api/tasks/cache/status

### Step 5: Get the current task from database to verify persistence
GET http://localhost:8080/api/tasks/current

### Step 6: Check database by getting task history (should show the updated JSON)
GET http://localhost:8080/api/tasks/history/1